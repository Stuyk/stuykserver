<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/login.css" rel="stylesheet">
  </head>
  <body>
    <div class="site-wrapper">
      <div class="site-wrapper-inner">
        <div class="cover-container">
          <div class="inner cover">
			<div class="col-sm-8 col-sm-offset-2 custom-form">
				<img src="images/logo.png" class="custom-logo-spacer col-sm-10" />
				<h4 style="color: #FFFFFF; padding: 20px">www.stuyk.com/forums/</h4>
				<ul class="nav nav-pills nav-justified">
				  <li class="active col-sm-6"><a data-toggle="tab" id="existingUser" href="#login" class="custom-link">Existing User</a></li>
				  <li class="col-sm-6"><a data-toggle="tab" href="#register" class="custom-link">New User</a></li>
				</ul>
				<div class="tab-content">
					<div id="login" class="tab-pane fade in active">
						<div class="form-group">
							<div class="col-sm-12">
								<div class="alert alert-danger" id="doesNotMatch" role="alert" hidden>Email or password does not match.</div>
								<div class="alert alert-danger" id="doesNotExist" role="alert" hidden>This account does not exist.</div>
								<div class="alert alert-danger" id="doesNotMatchAccount" role="alert" hidden>Username does not match account.</div>
								<div class="row">
									<input type="email" class="form-control" id="inputEmail" placeholder="Email" />
								</div>
								<br />
								<div class="row">
									<input type="password" class="form-control" id="inputPassword" placeholder="Password" />
								</div>
								<br />
								<div class="row">
									<button id="loginButton" type="submit" class="btn btn-info col-sm-12 col-sm-offset-0">Login</button>
								</div>
								<div class="progress" style="height: 35px" id="pushingLogin" hidden>
									<div class="progress-bar progress-bar-striped progress-bar-success active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" style="width: 100%; margin-bottom: 10px"><h5>Please Wait</h5></div>
								</div>
							</div>
						</div>
					</div>
					<div id="register" class="tab-pane fade">
						<div class="form-group">
							<div class="col-sm-12">
								<div class="alert alert-danger" id="passWordMismatch" role="alert" hidden>Oops! Your passwords don't match.</div>
								<div class="alert alert-warning" id="invalidEmail" role="alert" hidden>Oops! That's not a valid email.</div>
								<div class="alert alert-success" id="registrationSuccess" role="alert" hidden>Success! You may now log in.</div>
								<div class="row" id="regEmail">
									<input type="email" class="form-control" id="registerEmail" placeholder="Email" />
								</div>
								<br />
								<div class="row" id="regPass">
									<input type="password" class="form-control" id="registerPassword" placeholder="Password" />
								</div>
								<br />
								<div class="row" id="regPassTwo">
									<input type="password" class="form-control" id="registerPasswordAgain" placeholder="Password Match" />
								</div>
								<br />
								<div class="row" id="regButton">
									<button id="registerButton" type="submit" class="btn btn-info col-sm-12 col-sm-offset-0">Register</button>
								</div>
								<div class="progress" style="height: 35px" id="pushingRegistration" hidden>
									<div class="progress-bar progress-bar-striped progress-bar-success active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" style="width: 100%; margin-bottom: 10px"><h5>Please Wait</h5></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
          </div>
        </div>
      </div>
    </div>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script type="text/javascript">
	$('#login').keydown(function(e) {
		if (e.which == 13) {
			var inputEmail = $('#inputEmail').val();
			if (inputEmail.length > 1) {
				parseLogin();
			}
		}
	});
	
	$('#register').keydown(function(e) {
		if (e.which == 13) {
			var registerEmail = $('#registerEmail').val();
			if (registerEmail.length > 1) {
				parseRegistration();
			}
		}
	});

	document.getElementById("loginButton").onclick = function ()
	{
		parseLogin();
	}

	document.getElementById("registerButton").onclick = function ()
	{
		parseRegistration();
	}
	
	function parseLogin() {
		var email = document.getElementById("inputEmail").value;
		var password = document.getElementById("inputPassword").value;
		if(email.indexOf('@') >= 0) {
			resourceCall("loginHandler", email, password);
			$('#inputEmail').hide();
			$('#inputPassword').hide();
			$('#loginButton').hide();
			$('#pushingLogin').show();
			$('#doesNotExist').hide();
			$('#doesNotMatch').hide();
			$('#doesNotMatchAccount').hide();
		}
	}
	
	function parseRegistration() {
		var email = document.getElementById("registerEmail").value;
		var password = document.getElementById("registerPassword").value;
		var passwordtwo = document.getElementById("registerPasswordAgain").value;
		if(email.indexOf('@') >= 0) {
			if (password === passwordtwo) {
				$('#pushingRegistration').show();
				$('#passWordMismatch').hide();
				$('#invalidEmail').hide();
				$('#regPass').hide();
				$('#regPassTwo').hide();
				$('#regButton').hide();
				$('#regEmail').hide();
				resourceCall("registerHandler", email, password, passwordtwo);
			} else {
				$('#passWordMismatch').show();
				$('#invalidEmail').hide();
			}
		} else {
			$('#passWordMismatch').hide();
			$('#invalidEmail').show();
		}
	}
	
	
	function showLogin() {
		$('#pushingRegistration').hide();
		$('#registrationSuccess').show();
	}
	
	function doesNotMatch() {
		$('#doesNotMatch').show();
		$('#doesNotExist').hide();
		$('#doesNotMatchAccount').hide();
		$('#inputEmail').show();
		$('#inputPassword').show();
		$('#loginButton').show();
		$('#pushingLogin').hide();
	}
	
	function doesNotExist() {
		$('#doesNotExist').show();
		$('#doesNotMatch').hide();
		$('#doesNotMatchAccount').hide();
		$('#inputEmail').show();
		$('#inputPassword').show();
		$('#loginButton').show();
		$('#pushingLogin').hide();
	}
	
	function doesNotMatchAccount() {
		$('#doesNotMatchAccount').show();
		$('#doesNotMatch').hide();
		$('#doesNotExist').hide();
		$('#inputEmail').show();
		$('#inputPassword').show();
		$('#loginButton').show();
		$('#pushingLogin').hide();
	}
	</script>
	</body>
</html>

