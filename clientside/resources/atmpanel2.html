<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="atmpanelnew.css" rel="stylesheet">
  </head>
  <body>
    <div class="site-wrapper">
      <div class="site-wrapper-inner">
        <div class="cover-container">
          <div class="inner cover">
			<div class="col-sm-8 col-sm-offset-2 custom-form">
						<div class="form-group">
							<div class="col-sm-12">
								<div class="row" style="margin-bottom: 20px">
									<h3 class="atm-panel-text" id="accountToggle">Balance: $<span id="accountBalance"></span></h3>
								</div>
								<div class="row" style="margin-bottom: 20px">
									<div class="input-group">
										<div class="input-group-addon">$</div>
										<input type="number" class="form-control" onkeypress='return event.charCode >= 48 && event.charCode <= 57' id="inputAmount" placeholder="Amount">
										<div class="input-group-addon">.00</div>
									</div>
								</div>
								<div class="row" style="margin-bottom: 20px">
									<button id="withdrawButton" type="submit" class="btn btn-info col-sm-5 col-sm-offset-0">Withdraw</button>
									<button id="depositButton" type="submit" class="btn btn-info col-sm-5 col-sm-offset-2">Deposit</button>
								</div>
								<div class="row" style="margin-bottom: 20px">
									<button id="closeButton" type="submit" class="btn btn-danger col-sm-12 col-sm-offset-0">Close</button>
								</div>
								<div class="alert alert-success" id="withdrawAlert" role="alert" hidden>You have withdrawn: $<span id="amountWithdrawn"></span></div>
								<div class="alert alert-danger" id="withdrawError" role="alert" hidden>You must specify an amount to withdraw.</div>
								<div class="alert alert-danger" id="withdrawLimit" role="alert" hidden>You don't have that much money to withdraw.</div>
								<div class="alert alert-success" id="depositAlert" role="alert" hidden>You have deposited: $<span id="amountDeposited"></span></div>
								<div class="alert alert-danger" id="depositError" role="alert" hidden>You must specify an amount to deposit.</div>
								<div class="alert alert-danger" id="depositLimit" role="alert" hidden>You don't have that much money to deposit.</div>
							</div>
						</div>
			</div>
          </div>
        </div>
      </div>
    </div>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			resourceCall("requestAccountBalance");
		});
	
		var currentMoney = null;
		var accountMoney = null;
	
		document.getElementById("closeButton").onclick = function ()
		{
			resourceCall("killPanel");
		}
	
		document.getElementById("depositButton").onclick = function ()
		{
			var amount = document.getElementById("inputAmount").value;
			if (amount >= 1) {
				if (amount <= currentMoney) {
					$('#withdrawAlert').hide();
					$('#withdrawError').hide();
					$('#depositError').hide();
					$('#depositLimit').hide();
					$('#withdrawLimit').hide();
					$('#amountDeposited').html(amount);
					resourceCall("depositATM", amount);
					$('#depositAlert').show();
					return;
				}
				$('#depositLimit').show();
				$('#withdrawAlert').hide();
				$('#withdrawError').hide();
				$('#depositError').hide();
				$('#depositAlert').hide();
				$('#withdrawLimit').hide();
				return;
			}
			$('#depositLimit').hide();
			$('#withdrawAlert').hide();
			$('#withdrawError').hide();
			$('#depositAlert').hide();
			$('#depositError').show();
			$('#withdrawLimit').hide();
			return;
		}
	
		document.getElementById("withdrawButton").onclick = function ()
		{
			var amount = document.getElementById("inputAmount").value;
			if (amount >= 1) {
				if (amount <= accountMoney) {
					$('#withdrawError').hide();
					$('#withdrawLimit').hide();
					$('#depositAlert').hide();
					$('#depositError').hide();
					$('#depositLimit').hide();
					$('#amountWithdrawn').html(amount);
					resourceCall("withdrawATM", amount);
					$('#withdrawAlert').show();
					return;
				}
				$('#withdrawLimit').show();
				$('#withdrawAlert').hide();
				$('#depositAlert').hide();
				$('#depositError').hide();
				$('#withdrawError').hide();
				$('#depositLimit').hide();
				return;
			}
			$('#depositLimit').hide();
			$('#withdrawAlert').hide();
			$('#depositAlert').hide();
			$('#depositError').hide();
			$('#withdrawError').show();
			$('#withdrawLimit').hide();
			return;
		}
	
		function displayAccountBalance(amount, currmoney) {
			$('#accountBalance').html(amount);
			currentMoney = currmoney;
			accountMoney = amount;
			return;
		}
	</script>
	</body>
</html>

